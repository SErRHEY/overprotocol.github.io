<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developers/differences-from-ethereum" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Differences from Ethereum | OverProtocol Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://overprotocol.github.io/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://overprotocol.github.io/img/social-card.png"><meta data-rh="true" property="og:url" content="https://overprotocol.github.io/developers/differences-from-ethereum"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Differences from Ethereum | OverProtocol Docs"><meta data-rh="true" name="description" content="A list of differences from Ethereum that can significantly impact how applications are built and function on this platform."><meta data-rh="true" property="og:description" content="A list of differences from Ethereum that can significantly impact how applications are built and function on this platform."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://overprotocol.github.io/developers/differences-from-ethereum"><link data-rh="true" rel="alternate" href="https://overprotocol.github.io/developers/differences-from-ethereum" hreflang="en"><link data-rh="true" rel="alternate" href="https://overprotocol.github.io/developers/differences-from-ethereum" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.daa76ebc.css">
<link rel="preload" href="/assets/js/runtime~main.f0959ad3.js" as="script">
<link rel="preload" href="/assets/js/main.e6f5ea09.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Over-Logo_black.png" alt="Over Logo" class="themedImage_ToTc themedImage--light_HNdA header-logo"><img src="/img/Over-Logo_black.png" alt="Over Logo" class="themedImage_ToTc themedImage--dark_i4oU header-logo"></div><b class="navbar__title text--truncate">OverProtocol</b></a><a class="navbar__item navbar__link" href="/learn">Learn</a><a class="navbar__item navbar__link" href="/operators">Operators</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/developers">Developers</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/">Canary ðŸš§</a><a href="https://www.github.com/overprotocol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title">Developers</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/developers">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/developers/differences-from-ethereum">Differences from Ethereum</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/developers/build-your-contract">Build Your Contract</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build Your Contract&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/developers/client-apis">Client APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/developers/deployed-contracts">Deployed Contracts</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Differences from Ethereum</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Differences from Ethereum</h1></header><p>While OverProtocol is an independent Layer 1 protocol, it inherits the Ethereum Virtual Machine (EVM), making it compatible with Ethereum&#x27;s established ecosystem. This compatibility allows developers familiar with Ethereum&#x27;s development environment to transition smoothly and leverage their existing skills. Below, we outline the key aspects of OverProtocol that differentiate it from Ethereum, highlighting why understanding these distinctions is crucial for developers, as these differences can significantly impact how applications are built and function on this platform.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="account-expiration">Account Expiration<a href="#account-expiration" class="hash-link" aria-label="Direct link to Account Expiration" title="Direct link to Account Expiration">â€‹</a></h2><p>In OverProtocol, accounts that remain inactive for an extended period are subject to expiration. <a href="/learn/key-features/layered-architecture/ethanos">This mechanism</a> is designed to optimize the network&#x27;s efficiency and scalability by reducing the overhead of maintaining dormant accounts.</p><p>Account restoration in OverProtocol is not implemented at the opcode level but rather as a combination of a new transaction type and additional EVM functionalities.</p><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>Currently, contract accounts have restoration disabled to prevent their expiration. To keep a contract active and prevent it from expiring, it must be periodically used.</p><p>Usage is defined as any transaction querying the contract account&#x27;s state or calling its functions, including view functions. This ensures that contracts remain active and functional within the network ecosystem, adhering to the protocol&#x27;s operational requirements.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="differences-in-contract-address-derivation">Differences in Contract Address Derivation<a href="#differences-in-contract-address-derivation" class="hash-link" aria-label="Direct link to Differences in Contract Address Derivation" title="Direct link to Differences in Contract Address Derivation">â€‹</a></h2><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>While the same Externally Owned Account (EOA) address can be used across various EVM-compatible chains with the same private key, this does not apply to contract addresses.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="address-derivation">Address Derivation<a href="#address-derivation" class="hash-link" aria-label="Direct link to Address Derivation" title="Direct link to Address Derivation">â€‹</a></h3><p>Due to the state expiry feature in OverProtocol, all accounts, including contract accounts, could eventually expire. To mitigate the risk of an expired contract address being reused by a newly created contract, the contract creation operation always incorporates the caller account&#x27;s <code>restoredEpoch</code> value. This inclusion alters the outcome of the <code>CREATE</code> operation, making the resulting addresses differ from those on other EVM chains.</p><p>As a result, even though the <code>CREATE2</code> operation allows for deterministic address prediction and usage, it is not possible to reuse the same address across different chains as you would with EOA addresses.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>To use <code>CREATE2</code> for contract deployment, the address must be restored back to Epoch 0.</p></div></div><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create creates a new contract using code as deployment code.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">evm </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">EVM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">caller ContractRef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> code </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token builtin" style="color:rgb(130, 170, 255)">byte</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> gas </span><span class="token builtin" style="color:rgb(130, 170, 255)">uint64</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">big</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ret </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token builtin" style="color:rgb(130, 170, 255)">byte</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> contractAddr common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> leftOverGas </span><span class="token builtin" style="color:rgb(130, 170, 255)">uint64</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token builtin" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  contractAddr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> crypto</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">CreateAddress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">caller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> evm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">StateDB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetRestoredEpoch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">caller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> evm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">StateDB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetNonce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">caller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> evm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">caller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">codeAndHash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> gas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> contractAddr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> CREATE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create2 creates a new contract using code as deployment code.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The different between Create2 with Create is Create2 uses keccak256(0xff ++ msg.sender ++ salt ++ keccak256(init_code))[12:]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// instead of the usual sender-and-nonce-hash as the address where the contract is initialized at.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">evm </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">EVM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Create2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">caller ContractRef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> code </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token builtin" style="color:rgb(130, 170, 255)">byte</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> gas </span><span class="token builtin" style="color:rgb(130, 170, 255)">uint64</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> endowment </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">big</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> salt </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">uint256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ret </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token builtin" style="color:rgb(130, 170, 255)">byte</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> contractAddr common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> leftOverGas </span><span class="token builtin" style="color:rgb(130, 170, 255)">uint64</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token builtin" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  codeAndHash </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">codeAndHash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  contractAddr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> crypto</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">CreateAddress2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">caller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> salt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Bytes32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> codeAndHash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Hash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> evm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">caller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> codeAndHash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> gas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> endowment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> contractAddr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> CREATE2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="differences-in-account-structure">Differences in Account Structure<a href="#differences-in-account-structure" class="hash-link" aria-label="Direct link to Differences in Account Structure" title="Direct link to Differences in Account Structure">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="account-nonce">Account Nonce<a href="#account-nonce" class="hash-link" aria-label="Direct link to Account Nonce" title="Direct link to Account Nonce">â€‹</a></h3><p>In traditional blockchain architectures, the <code>nonce</code> primarily tracks the number of transactions sent from a given account, ensuring transaction order and preventing double-spending. However, due to the expiration feature in OverProtocol, distinguishing explicitly between expired accounts and newly created accounts becomes challenging, raising the possibility of <code>nonce</code> overlap. To address this issue, OverProtocol introduces the <code>restoredEpoch</code> as a crucial component.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="restoredepoch">RestoredEpoch<a href="#restoredepoch" class="hash-link" aria-label="Direct link to RestoredEpoch" title="Direct link to RestoredEpoch">â€‹</a></h3><p>The combination of the <code>nonce</code> and the <code>restoredEpoch</code> value ensures uniqueness for each account. This system allows OverProtocol to maintain the integrity and distinction of account states over time, even through periods of account inactivity and expiration.</p><p>For a more detailed explanation, please refer to the <a href="/learn/key-features/layered-architecture/ethanos#dealing-with-crumb-accounts-restored-epoch">documentation</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="nonce-field-in-transaction"><code>nonce</code> Field in Transaction<a href="#nonce-field-in-transaction" class="hash-link" aria-label="Direct link to nonce-field-in-transaction" title="Direct link to nonce-field-in-transaction">â€‹</a></h4><p>In RPC requests, such as <code>eth_getTransactionCount</code>, the response reflects this unique combination. The <code>nonce</code> is split into a 64-bit field, with the first 32 bits representing the <code>restoredEpoch</code> and the remaining 32 bits functioning as the traditional <code>nonce</code>. This adaptation allows developers to leverage existing Ethereum development environments while accommodating the unique features of OverProtocol.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-count">Storage Count<a href="#storage-count" class="hash-link" aria-label="Direct link to Storage Count" title="Direct link to Storage Count">â€‹</a></h3><p>This feature prepares for future functionalities where the cost associated with an account&#x27;s storage usage might be billed. Each new storage slot created by an <code>SSTORE</code> operation increases the count, while emptying a slot decreases it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ui-hash">UI Hash<a href="#ui-hash" class="hash-link" aria-label="Direct link to UI Hash" title="Direct link to UI Hash">â€‹</a></h3><p>Reserved space for future proof related to an account&#x27;s interaction with external layers. Currently, this feature is not utilized but is planned for future enhancements to enhance cross-layer interactions and verifications.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc">Misc<a href="#misc" class="hash-link" aria-label="Direct link to Misc" title="Direct link to Misc">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="selfdestruct-operation"><code>SELFDESTRUCT</code> Operation<a href="#selfdestruct-operation" class="hash-link" aria-label="Direct link to selfdestruct-operation" title="Direct link to selfdestruct-operation">â€‹</a></h3><p>The <code>SELFDESTRUCT</code> opcode, updated in accordance with <a href="https://eips.ethereum.org/EIPS/eip-6780" target="_blank" rel="noopener noreferrer"><code>EIP-6780</code></a>, is implemented in such a way that while it does not actually destroy the contract account, it does process refunds. Contracts that are not used will naturally expire over time as the Ethanos epoch progresses.</p><p>The rationale behind incorporating EIP-6780 into OverProtocol differs significantly from its application in Ethereum. OverProtocol&#x27;s implementation is specifically designed to avoid scenarios where a self-destructed contract account becomes indistinguishable from an Externally Owned Account (EOA). This distinction is crucial for maintaining clarity and integrity in the network&#x27;s account management, ensuring that the lifecycle of contract accounts is handled in a better way.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-changes">Future Changes<a href="#future-changes" class="hash-link" aria-label="Direct link to Future Changes" title="Direct link to Future Changes">â€‹</a></h2><p>As OverProtocol progresses towards the Ethanos endgame, significant changes are planned, particularly regarding how storage is managed within accounts. These adjustments will be designed to ensure that backward compatibility is maximally preserved and that a seamless migration can occur. This means that current dApp developers should not be overly concerned about the impending changes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-layout-change">Storage Layout Change<a href="#storage-layout-change" class="hash-link" aria-label="Direct link to Storage Layout Change" title="Direct link to Storage Layout Change">â€‹</a></h3><p>Upcoming updates to OverProtocol will include a comprehensive overhaul of the storage layout within accounts. This change aims to enhance the efficiency and scalability of data management on the blockchain. Details on the new storage system will be provided as development progresses, ensuring developers have ample time to adapt their applications. This transition is intended to be smooth, with support structures in place to assist developers in migrating existing applications without disruption.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/overprotocol/overprotocol.github.io/edit/develop/docs/developers/differences-from-ethereum.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/developers"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Getting Started</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/developers/build-your-contract"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Build Your Contract</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#account-expiration" class="table-of-contents__link toc-highlight">Account Expiration</a></li><li><a href="#differences-in-contract-address-derivation" class="table-of-contents__link toc-highlight">Differences in Contract Address Derivation</a><ul><li><a href="#address-derivation" class="table-of-contents__link toc-highlight">Address Derivation</a></li></ul></li><li><a href="#differences-in-account-structure" class="table-of-contents__link toc-highlight">Differences in Account Structure</a><ul><li><a href="#account-nonce" class="table-of-contents__link toc-highlight">Account Nonce</a></li><li><a href="#restoredepoch" class="table-of-contents__link toc-highlight">RestoredEpoch</a></li><li><a href="#storage-count" class="table-of-contents__link toc-highlight">Storage Count</a></li><li><a href="#ui-hash" class="table-of-contents__link toc-highlight">UI Hash</a></li></ul></li><li><a href="#misc" class="table-of-contents__link toc-highlight">Misc</a><ul><li><a href="#selfdestruct-operation" class="table-of-contents__link toc-highlight"><code>SELFDESTRUCT</code> Operation</a></li></ul></li><li><a href="#future-changes" class="table-of-contents__link toc-highlight">Future Changes</a><ul><li><a href="#storage-layout-change" class="table-of-contents__link toc-highlight">Storage Layout Change</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://x.com/overprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/overprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 OverProtocol</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f0959ad3.js"></script>
<script src="/assets/js/main.e6f5ea09.js"></script>
</body>
</html>